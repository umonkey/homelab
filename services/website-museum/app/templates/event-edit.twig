{% extends "admin.twig" %}

{% block page_title %}{% if object.id %}Редактирование события{% else %}Добавление события{% endif %} — {{ site_name }}{% endblock %}

{% block content %}
    {% include "parts/breadcrumbs.twig" %}

    <div class="page-header">
        {% if object.id %}
            <h1>Редактирование события</h1>
        {% else %}
            <h1>Добавление события</h1>
            {% if type.edit_subtitle %}
                <p class="lead">{{ type.edit_subtitle }}</p>
            {% endif %}
        {% endif %}
    </div>

    <form method="post" class="async">
        {% if args.get.back %}
            <input type="hidden" name="back" value="{{ args.get.back }}"/>
        {% endif %}

        <div class="form-group">
            <label>Заголовок:</label>
            <input class="form-control" type="text" name="title" required="required" autofocus="autofocus" value="{{ object.title }}"/>
            <p class="help-block">Хорошо: «Открытие зала робототехники», «Ночь музеев».&nbsp; Плохо: «Ко дню космонавтики», «В воскресенье работаем всю ночь».</p>
        </div>

        <div class="form-group">
            <label>Описание:</label>
            <textarea class="form-control" name="description" rows="10">{{ object.description }}</textarea>
            {% include "parts/md-help.twig" %}
        </div>

        {% include "parts/gallery-edit.twig" %}

        <hr/>

        {# <div class="form-group">
            <label>Подзаголовок:</label>
            <input class="form-control" type="text" name="subtitle" value="{{ object.subtitle }}"/>
            <p class="help-block">Дополнительный текст, описывающий статью в одном предложении.  Виден под заголовком.</p>
        </div> #}

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label>Дата проведения:</label>
                    <input class="form-control" type="date" name="date" value="{{ object.date }}"/>
                    <p class="help-block">Формат даты: ГГГГ-ММ-ДД, например: 2017-12-31.</p>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label>Время начала:</label>
                    <input class="form-control" type="time" name="time" value="{{ object.time }}"/>
                    <p class="help-block">Формат даты: ЧЧ:ММ, например: 18:30.</p>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="radio-inline"><input type="radio" name="published" value="yes"{% if object.published %} checked="checked"{% endif %}/> Опубликовать</label>
            <label class="radio-inline"><input type="radio" name="published" value="no"{% if not object.published %} checked="checked"{% endif %}/> черновик</label>
        </div>

        <hr/>

        <div class="actions">
            <button class="btn btn-primary">Сохранить изменения</button>
            {% if object.id %}
                <a href="/events/{{ object.id }}" class="btn btn-default">Открыть на сайте</a>
            {% endif %}
        </div>

        <p class="alert alert-info" id="msgbox" style="display: none"></p>
    </form>
{% endblock %}
